---
import { readItems } from "@directus/sdk";
import directus from "../lib/directus";
const projects = await directus.request(readItems("projects", {
  fields: ['*'],
}));
const tags = await directus.request(readItems("tags", {
  fields: ['*'],
}));
---

<section class="py-8">
  <div class="w-full bg-pink-700 rounded-t-lg">
    <h3 class="w-fit text-3xl font-bold relative my-2 px-4 py-3 text-gray-100">Tech Walkthroughs</h3>
  </div>
    <ul class="flex flex-col gap-y-4 md:gap-y-4 lg:gap-y-4">
        {
          projects.slice(0, 6).map((project) => (
          <li class="flex flex-col rounded-md bg-white hover:shadow-lg hover:scale-105 shadow-md transition h-24">
  <a 
  href={`/projects/${project.slug}`} 
  class="flex flex-row gap-x-1 p-1 relative h-full"
  >
  <div class="w-1/5 overflow-hidden">
    <img src={ `${process.env.DIRECTUS_URL}/assets/${project.image}` } alt={project.title} class="h-full w-full object-cover object-center rounded-l-md"/>
</div>

    <div class="flex flex-col gap-y-0 py-1 px-4 w-5/6">
      <h3 class="2xl:text-2xl font-semibold line-clamp-2 py-0 line- leading-5">
        {project.title}
      </h3>

      <div class="flex flex-wrap gap-1 tag-block">
        {project.tags?.map((tag) => (
          <span
            class="rounded-md px-2 py-1 text-xs md:text-sm font-semibold text-white shadow-sm-light transition tag-style" data-tag={tag}>
            {tag}
          </span>
        ))}
      </div>
    </div>
    

  </a>
</li>
          ))
        }
      </ul>
</section>