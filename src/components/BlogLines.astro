---
import { getCollection } from 'astro:content';
interface Props {
  currentSlug?: string;
}
const { currentSlug } = Astro.props;
const blogs = await getCollection('blog');
const filteredBlogs = currentSlug ? blogs.filter(blog => blog.data.slug !== currentSlug) : blogs;
---
<div class="rounded-lg w-full bg-white">
  <div class="w-full bg-pink-700 rounded-t-lg">
    <h3 class="w-fit text-xl font-bold relative my-0 px-4 py-2 text-gray-100">More Blog Posts</h3>
  </div>
  <ul class="flex flex-col gap-y-4 md:gap-y-4 lg:gap-y-4 py-2">
    {
      filteredBlogs.slice(0, 6).map((blog) => (
        <li class="flex flex-col bg-white hover:shadow-lg hover:scale-105 transition h-24">
          <a href={`/blog/${blog.data.slug}`} class="flex flex-row gap-x-1 p-1 relative h-full">
            <div class="w-1/5 overflow-hidden">
              <img src={ `/src/images/${blog.data.image}` } alt={blog.data.title} class="h-full w-full object-cover object-center rounded-l-md"/>
            </div>
            <div class="flex flex-col gap-y-0 py-1 px-4 w-5/6">
              <h3 class="text-base font-semibold line-clamp-2 py-0 line-leading-5">
                {blog.data.title}
              </h3>

      <div class="flex flex-wrap gap-1 tag-block">
        {blog.data.tags && blog.data.tags.length > 0 && 
          blog.data.tags.map((tag) => (
            <span
              class="rounded-md px-2 py-1 text-xs md:text-sm font-semibold text-white shadow-sm-light transition tag-style" 
              data-tag={tag}
            >
              {tag}
            </span>
          ))
        }
      </div>
    </div>
    

  </a>
</li>
          ))
        }
      </ul>
    </div>