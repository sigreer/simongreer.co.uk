---
import { getCollection } from 'astro:content';
import Card from './Card.astro';

interface Props {
  currentSlug?: string;
  limit?: number;
}

const { currentSlug, limit = 6 } = Astro.props;
const blogs = await getCollection('blog');
const filteredBlogs = currentSlug 
  ? blogs.filter(blog => blog.data.slug !== currentSlug)
  : blogs;
---

<ul class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
  {filteredBlogs.slice(0, limit).map(blog => (
    <Card 
      title={blog.data.title}
      slug={blog.data.slug}
      excerpt={blog.data.excerpt}
      tags={blog.data.tags}
      coverimage={blog.data.coverimage}
      type="blog"
    />
  ))}
</ul>