---
import { getCollection, render } from 'astro:content';
import TechPostLayout from "../../layouts/TechPostLayout.astro";
import { Image } from "astro:assets";
import Prose from "../../components/Prose.astro";
export async function getStaticPaths() {
  const techs = await getCollection('tech');
  return techs.map(tech => ({
    params: { id: tech.id },
    props: { tech }
  }));
}
const { tech } = Astro.props;
console.log('this is tech', tech);
const allCoverImages = import.meta.glob('../../images/covers/*', { eager: true })
const CoverImageSrc = tech.data.coverimage ? allCoverImages[`../../images/covers/${tech.data.coverimage}`]?.default : null;

const allVendorHorizontalLogos = import.meta.glob('../../images/vendor-horizontal-logos/*', { eager: true })
const VendorHorizontalLogoSrc = tech.data.horizontal_logo ? allVendorHorizontalLogos[`../../images/vendor-horizontal-logos/${tech.data.horizontal_logo}`]?.default : null;
const { Content, headings } = await render(tech);

---

<TechPostLayout title={tech.data.title} toc={headings} horizontal_logo={VendorHorizontalLogoSrc} cover_image={CoverImageSrc}>
  <Prose>
    <Content/>
  </Prose>  
</TechPostLayout>